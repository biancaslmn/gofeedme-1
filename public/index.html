<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Gofeedme</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--CSS-->

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
        crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.1/css/brands.css" integrity="sha384-whKHCkwP9f4MyD1vda26+XRyEg2zkyZezur14Kxc784RxUU1E7HvWVYj9EoJnUV7"
        crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.1/css/fontawesome.css" integrity="sha384-WK8BzK0mpgOdhCxq86nInFqSWLzR5UAsNg0MGX9aDaIIrFWQ38dGdhwnNCAoXFxL"
        crossorigin="anonymous">


    <link rel="stylesheet" type="text/css" media="screen" href="stylesheet.css">

    <!--Jquery-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>


</head>

<body>
    <div>
       <a href="http://localhost:3000/index.html"> <img  src="../media/logo.jpeg" alt="Logo" height="30%" width="30%"></a>
    </div>

    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="http://localhost:3000/index.html">GoFeedMe</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarSupportedContent"
            aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav mr-auto">
                <!--Modal login pop up-->
                <li class="nav-item">
                    <a class="nav-link" href="" class="btn btn-default btn-rounded" data-toggle="modal" data-target="#elegantModalForm">Login</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="events.html">Events</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="leftovers.html">Leftovers</a>
                </li>

            </ul>
            <form class="form-inline my-2 my-lg-0">
                <input class="form-control mr-sm-2" type="search" placeholder="Zip Code" aria-label="Search">
                <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
            </form>
    </nav>
    </div>
    </div>


    <!--Intro to application-->
    <div>
        <h1>Free perfectly good leftover food for the people and causes you care about</h1>
        <hr>

    </div>



    <!-- Modal -->
    <div class="modal fade" id="elegantModalForm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <!--Content-->
            <div class="modal-content form-elegant">
                <!--Header-->
                <div class="modal-header text-center">
                    <h3 class="modal-title w-100 dark-grey-text font-weight-bold my-3" id="myModalLabel"><strong>Sign
                            in</strong></h3>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <!--Body-->
                <div class="modal-body mx-4">
                    <!--Body-->
                    <div class="md-form mb-5">
                        <input type="email" id="Form-email1" class="form-control validate">
                        <label data-error="wrong" data-success="right" for="Form-email1">Your email</label>
                    </div>

                    <div class="md-form pb-3">
                        <input type="password" id="Form-pass1" class="form-control validate">
                        <label data-error="wrong" data-success="right" for="Form-pass1">Your password</label>
                        <p class="font-small blue-text d-flex justify-content-end">Forgot <a href="#" class="blue-text ml-1">
                                Password?</a></p>
                    </div>

                    <div class="text-center mb-3">
                        <button id="btn-signin" type="button" class="btn blue-gradient btn-block btn-rounded z-depth-1a">Sign in</button>
                    </div>
                    <p class="font-small dark-grey-text text-right d-flex justify-content-center mb-3 pt-2"> or Sign in
                        with:</p>

                    <div class="row my-3 d-flex justify-content-center">
                        <!--Facebook-->
                        <button type="button" class="btn btn-white btn-rounded mr-md-3 z-depth-1a"><i class="fab fa-facebook-square"></i></button>
                        <!--Instagram-->
                        <button type="button" class="btn btn-white btn-rounded mr-md-3 z-depth-1a"><i class="fab fa-instagram"></i></button>
                        <!--Twitter +-->
                        <button type="button" class="btn btn-white btn-rounded z-depth-1a"><i class="fab fa-twitter-square"></i></button>
                    </div>
                </div>
                <!--Footer-->
                <div class="modal-footer mx-5 pt-3 mb-1">
                    <p class="font-small grey-text d-flex justify-content-end">Not a member? <a href="#" id="a-signup"
                            class="blue-text ml-1">
                            Sign Up</a></p>
                </div>
            </div>
            <!--/.Content-->
        </div>
    </div>
    <!-- Modal -->

    <!--Sign Up Form-->
    <div class="modal fade" id="exquisiteModalForm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <!--Content-->
            <div class="modal-content form-elegant">
                <!--Header-->
                <div class="modal-header text-center">
                    <h3 class="modal-title w-100 dark-grey-text font-weight-bold my-3" id="myModalLabel"><strong>Sign
                            Up</strong></h3>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <!--Body-->
                <div class="modal-body mx-4">
                    <!--Body-->
                    <div class="md-form mb-5">
                        <input type="email" id="Form-email2" class="form-control validate">
                        <label data-error="wrong" data-success="right" for="Form-email2">Your email</label>
                    </div>

                    <div class="md-form pb-3">
                        <input type="password" id="Form-pass2" class="form-control validate">
                        <label data-error="wrong" data-success="right" for="Form-pass2">Your password</label>

                    </div>

                    <div class="md-form pb-3">
                        <input type="password" id="Form-pass2_2" class="form-control validate">
                        <label data-error="wrong" data-success="right" for="Form-pass2_2">Confirm Password</label>

                    </div>
                    <div>
                            <label for="Form-usertype-signup">User Type</label>
                        <select class="form-control" id="Form-usertype-signup">
                            <option value="PROVIDER">Provider</option>
                            <option value="BENEFICIARY">Beneficiary</option>                    
                        </select>
                            <!-- <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="inlineRadioOptions" id="Form-usertype-signup" value="option1">
                                    <label class="form-check-label" for="inlineRadio1">Provider</label>
                                  </div>
                                  <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="inlineRadioOptions" id="Form-usertype-signup" value="option2">
                                    <label class="form-check-label" for="inlineRadio2">Beneficiary</label>
                                  </div> -->
                        </div>
                        <br>
                    <div class="text-center mb-3">
                        <button id="btn-signup" type="button" class="btn blue-gradient btn-block btn-rounded z-depth-1a">Sign up</button>
                    </div>
                    <p class="font-small dark-grey-text text-right d-flex justify-content-center mb-3 pt-2"> or Sign up
                        with:</p>

                    <div class="row my-3 d-flex justify-content-center">
                        <!--Facebook-->
                        <button type="button" class="btn btn-white btn-rounded mr-md-3 z-depth-1a"><i class="fab fa-facebook-square"></i></button>
                        <!--Instagram -->
                        <button type="button" class="btn btn-white btn-rounded mr-md-3 z-depth-1a"><i class="fab fa-instagram"></i></button>
                        <!--Twitter-->
                        <button type="button" class="btn btn-white btn-rounded z-depth-1a"><i class="fab fa-twitter-square"></i></button>
                    </div>
                </div>
                <!--Footer-->

            </div>
            <!--/.Content-->
        </div>
    </div>
    <!-- Modal -->



    <!--Jumbotron Section-Typography-->
    <div class="jumbotron">
        <div class="container">

        </div>
    </div>


    <!--Auto Activated Carousel-->
    <div id='carousel_container'>
        <div id='carousel_inner'>
            <ul id='carousel_ul'>
                <li>
                    <a href='#'>
                        <img src='../media/ca.jpg' />
                    </a>
                </li>
                <li>
                    <a href='#'>
                        <img src='../media/co.jpg' />
                    </a>
                </li>
                <li>
                    <a href='#'>
                        <img src='../media/la.jpg' />
                    </a>
                </li>
                <li>
                    <a href='#'>
                        <img src='../media/nj.jpg' />
                    </a>
                </li>
                <li>
                    <a href='#'>
                        <img src='../media/ny.jpg' />
                    </a>
                </li>
                <li>
                    <a href='#'>
                        <img src='../media/or.jpg' />
                    </a>
                </li>
                <li>
                    <a href='#'>
                        <img src='../media/sc.jpg' />
                    </a>
                </li>
                <li>
                    <a href='#'>
                        <img src='../media/tx.jpg' />
                    </a>
                </li>
                <li>
                    <a href='#'>
                        <img src='../media/gables.jpg' />
                    </a>
                </li>
                <li>
                    <a href='#'>
                        <img src='../media/pizza1.jpg' />
                    </a>
                </li>
            </ul>
        </div>
    </div>

    <!--Footer-->
    <div class="footer-copyright "> Copyright © 2018 GoFeedMe
    </div>

    </div>



</body>

<!--JS File-->
<!--Login and Sign Up API/AJAX-->
<script>
    $(document).ready(function () {
        var urlParams = new URLSearchParams(window.location.search);
        if (urlParams.has('user_id')) {
            // userId = passed with every API call to get user data
            var userId = urlParams.get('user_id');
            // HERE WE LOAD THE CURRENT PAGE WITH THE USER SPECIFIC DATA WITH AJAX
        }
    });
</script>

<!--Activate Modal-->
<!-- <script> 
// <button type="button" data-toggle="modal" data-target="#myModal">Launch modal</button>
    $('#elegantModalForm').modal({});
</script> -->


<script type="text/javascript">
    $(document).ready(function () {

        $("#btn-signin").on("click", function(e) {
            var email = $("#Form-email1").val();            
            var password = $("#Form-pass1").val();            
            if(!email || !password) {
                return alert("Please enter an email and password");
            }

            $.ajax({
                url: `/dashboard?user_id=${email}&password=${password}`,
                method: 'GET'
            }).then(function(body, status, resp) {                        
               if(body.result === 'redirect') {                    
                    window.location.replace(body.url);
                } 
            }).catch(function(err){                
                alert(err.responseJSON.message);
            });
        });

        $("#btn-signup").on("click", function(e) {            
            var email = $("#Form-email2").val();
            var userType = $('#Form-usertype-signup option:selected').val();
            var passwordArg = $("#Form-pass2").val();            
            var password2 = $("#Form-pass2_2").val();

            if(passwordArg !== password2) {
                return alert("The passwords do not match");                
            }

            $.ajax({
                url: '/api/users',
                method: 'POST',
                data: {
                    name: email,
                    password: passwordArg,
                    user_type: userType
                }
            }).then(function(body, status, resp){    
                console.log(body);
                console.log(status);
                console.log(resp);
                if(status === "success") {
                    alert("New user account created.");
                } else {
                    alert("New user account creation failed.")
                }
                $("#exquisiteModalForm").modal("hide");                   
            });
        });

        $("#a-signup").on("click", function(){            
            $('#elegantModalForm').modal("hide"); 
            $("#exquisiteModalForm").modal("show");
        });

        //options( 1 - ON , 0 - OFF)  
        var auto_slide = 1;
        var hover_pause = 1;
        var key_slide = 1;

        //speed of auto slide(  
        var auto_slide_seconds = 0;
        /* IMPORTANT: i know the variable is called ...seconds but it's 
        in milliseconds ( multiplied with 1000) '*/

        /*move the last list item before the first item. The purpose of this is 
        if the user clicks to slide left he will be able to see the last item.*/
        $('#carousel_ul li:first').before($('#carousel_ul li:last'));

        //check if auto sliding is enabled  
        if (auto_slide == 1) {
            /*set the interval (loop) to call function slide with option 'right' 
            and set the interval time to the variable we declared previously */
            var timer = setInterval('slide("right")', auto_slide_seconds);

            /*and change the value of our hidden field that hold info about 
            the interval, setting it to the number of milliseconds we declared previously*/
            $('#hidden_auto_slide_seconds').val(auto_slide_seconds);
        }

        //check if hover pause is enabled  
        if (hover_pause == 1) {
            //when hovered over the list  
            $('#carousel_ul').hover(function () {
                //stop the interval  
                clearInterval(timer)
            }, function () {
                //and when mouseout start it again  
                timer = setInterval('slide("right")', auto_slide_seconds);
            });

        }

        //check if key sliding is enabled  
        if (key_slide == 1) {

            //binding keypress function  
            $(document).bind('keypress', function (e) {
                //keyCode for left arrow is 37 and for right it's 39 '  
                if (e.keyCode == 37) {
                    //initialize the slide to left function  
                    slide('left');
                } else if (e.keyCode == 39) {
                    //initialize the slide to right function  
                    slide('right');
                }
            });

        }

    })

    //FUNCTIONS BELLOW  

    //slide function  
    function slide(where) {

        //get the item width  
        var item_width = $('#carousel_ul li').outerWidth() + 10;

        /* using a if statement and the where variable check 
        we will check where the user wants to slide (left or right)*/
        if (where == 'left') {
            //...calculating the new left indent of the unordered list (ul) for left sliding  
            var left_indent = parseInt($('#carousel_ul').css('left')) + item_width;
        } else {
            //...calculating the new left indent of the unordered list (ul) for right sliding  
            var left_indent = parseInt($('#carousel_ul').css('left')) - item_width;

        }

        //make the sliding effect using jQuery's animate function... '  
        $('#carousel_ul:not(:animated)').animate({
            'left': left_indent
        }, 600, function () {

            /* when the animation finishes use the if statement again, and make an ilussion 
            of infinity by changing place of last or first item*/
            if (where == 'left') {
                //...and if it slided to left we put the last item before the first item  
                $('#carousel_ul li:first').before($('#carousel_ul li:last'));
            } else {
                //...and if it slided to right we put the first item after the last item  
                $('#carousel_ul li:last').after($('#carousel_ul li:first'));
            }

            //...and then just get back the default left indent  
            $('#carousel_ul').css({
                'left': '-210px'
            });
        });

    }
</script>

</html>